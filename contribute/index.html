<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://github.com/pprados/virtual_dataframe/contribute/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>contribute - virtual_dataframe</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "contribute";
        var mkdocs_page_input_path = "contribute.md";
        var mkdocs_page_url = "/pprados/virtual_dataframe/contribute/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> virtual_dataframe
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Contribute</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">contribute</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#principes-dorganisation-du-projet">Principes d'organisation du projet</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#truc-et-astuces">Truc et astuces</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#les-test">Les test</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#verifier-le-build">Vérifier le build</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#deverminer-le-makefile">Déverminer le Makefile</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#convertir-un-notebook">Convertir un notebook</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gestion-des-regles-ne-produisant-pas-de-fichiers">Gestion des règles ne produisant pas de fichiers</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#recommandations">Recommandations</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../commands/">Commands</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CHANGELOG/">Changelog</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">virtual_dataframe</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Contribute &raquo;</li>
      <li>contribute</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/pprados/virtual_dataframe/edit/master/docs/contribute.md"
          class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="contribute">Contribute</h1>
<p>Récupérez les sources</p>
<pre><code class="language-bash">$ git clone https://github.com/pprados/virtual_dataframe virtual_dataframe
</code></pre>
<p>puis:</p>
<pre><code class="language-bash">$ cd virtual_dataframe
$ make configure
$ conda activate virtual_dataframe
$ make test
</code></pre>
<h2 id="principes-dorganisation-du-projet">Principes d'organisation du projet</h2>
<ul>
<li>
<p>Un <code>make validate</code> est exécuter automatiquement avant un <code>git push</code> sur la branche <code>master</code>.
  Il ne doit pas générer d'erreurs. Cela permet d'avoir un build incassable, en ne publiant
  que des commits validés.
  Il est possible de forcer tout de même le push avec <code>FORCE=y git push</code>.
  Cela permet d'avoir l'équivalent d'une CI/CD en local. Bien entendu, cela peut etre supprimé
  si une plateforme d'intégration est disponible.</p>
</li>
<li>
<p>La version du projet et déduite du tag courant GIT</p>
</li>
<li>
<p>Le code du projet doit être présent dans le package <code>virtual_dataframe</code>.
  Ils doivent être exécuté depuis le <code>home</code> du projet. Pour cela, une astuce consiste
  à forcer le <code>home</code> dans les templates Python de PyCharm. Ainsi, un <code>run</code> depuis un source
  fonctionne directement, sans manipulation.</p>
</li>
<li>
<p>Le <code>typing &lt;https://realpython.com/python-type-checking/&gt;</code>_ est recommandé, afin d'améliorer la qualité du code
  et sa documentation. Vous pouvez vérifier cela avec <code>make typing</code>, ou ajouter automatiquement une partie du typing
  à votre code avec <code>make add-typing</code>.</p>
</li>
</ul>
<h2 id="truc-et-astuces">Truc et astuces</h2>
<p>Quelques astuces disponibles dans le projet.</p>
<h3 id="les-test">Les test</h3>
<p>Les tests sont divisés en deux groupes : <code>unit-test</code> et <code>functional-test</code>.
Il est possible d'exécuter l'un des groups à la fois (<code>make (unit|functional)-test</code>) ou
l'ensemble (<code>make test</code>).</p>
<p>Les tests sont parallélisés lors de leurs executions. Cela permet de bénéficier des architectures
avec plusieurs coeurs CPU. Pour désactiver temporairement cette fonctionnalité, il suffit
d'indiquer un nombre de coeur réduit à utiliser. Par exemple : <code>NPROC=1 make test</code></p>
<h3 id="verifier-le-build">Vérifier le build</h3>
<p>Pour vérifier que le <code>Makefile</code> est correct, vous pouvez vider l'environement conda avec <code>make clean-venv</code>
puis lancer votre règle. Elle doit fonctionner directement et doit même pouvoir être exécuté deux fois
de suite, sans rejouer le traitement deux fois. Par exemple :</p>
<pre><code class="language-bash">$ make validate
</code></pre>
<h3 id="deverminer-le-makefile">Déverminer le Makefile</h3>
<p>Il est possible de connaitre la valeur calculée d'une variable dans le <code>Makefile</code>. Pour cela,
utilisez <code>make dump-MA_VARIABLE</code>.</p>
<p>Pour comprendre les règles de dépendances justifiant un build, utilisez <code>make --debug -n</code>.
{% if cookiecutter.use_jupyter == 'y' %}</p>
<h3 id="convertir-un-notebook">Convertir un notebook</h3>
<p>Il est possible de convertir un notebook en script, puis de lui ajouter un typage.</p>
<pre><code class="language-bash">make nb-convert add-typing
</code></pre>
<h3 id="gestion-des-regles-ne-produisant-pas-de-fichiers">Gestion des règles ne produisant pas de fichiers</h3>
<p>Le code génère des fichiers  <code>.make-&lt;rule&gt;</code> pour les règles ne produisant pas
de fichier, comme <code>test</code> ou <code>validate</code> par exemple. Vous pouvez ajoutez ces
fichiers à GIT pour mémoriser la date de la dernière exécution. Ainsi, les
autres développeurs n'ont pas besoin de les ré-executer si ce n'est pas nécessaire.</p>
<p>{% endif %}</p>
<h3 id="recommandations">Recommandations</h3>
<ul>
<li>Utilisez un CHANGELOG basé sur <code>Keep a Changelog &lt;https://keepachangelog.com/en/1.0.0/&gt;</code>_,</li>
<li>Utilisez un format de version conforme à <code>Semantic Versioning &lt;https://semver.org/spec/v2.0.0.html&gt;</code>_.</li>
<li>Utiliser une approche <code>Develop/master branch &lt;https://nvie.com/posts/a-successful-git-branching-model/&gt;</code>_.</li>
<li>Faite toujours un <code>make validate</code> avant de commiter le code</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../commands/" class="btn btn-neutral float-right" title="Commands">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/pprados/virtual_dataframe" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../commands/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
